---
layout: post
title: GTM使用教程（三）：转化跟踪
permalink: /google-tag-manager/user-guide-3/
category : Google Tag Manager
tags : [Google Tag Manager, GTM, 转化跟踪, 目标跟踪, 事件跟踪]
---
{% include JB/setup %}


转化（或者说目标），是我们进行任何网络推广前首先需要明确的，没有目标的推广是危险的！悲观点是自己怎么亏的都不知道，或者更乐观点就是自己赚的钱怎么来的都不知道。

在任何的网站分析或者网络营销课程中，第一堂课一定是让你明确自己的目标，也有的可能叫做受众分析，也即明确营销的TA（Target Audience）。

本文将讲述如何在GTM中设置目标跟踪（我们这里仅以AdWords为例，其他的应该也是类似的），大致会有以下几种类型，从简单到复杂依次如下：

1.根据URL规则，比如订单成功页面、注册成功页面，在这些特定的页面触发特定的转化跟踪代码。如果是有价值的目标，比如订单，则还可以赋予动态（或者静态）的转化目标价值。设置方法如下：

>1.创建规则：然后URL包含或者等于你目标页面的URL即可，如：http://xiaoq.in/order/success之类的

>2.新建代码：跟踪代码类型选择AdWords转化跟踪，根据右侧文字提示填入相应的转化ID、转化标签、转化价值。

>3.触发规则：选择上述创建的规则，并保存。

然后记得调试正确后发布即可。

其中，第二步可能会复杂一点，比如转化价值，可能需要根据订单金额设置一个变量。这个时候我们就可以通过调用订单价值的宏来实现。转化价值的宏，一般建议是通过javascript代码的方式获取，一般懂一点js的童鞋应该都没问题。关于这个我们后续再详解。

2.根据事件规则，比如点击提交按钮，点击跳转到站外的链接等。这对于没有中间跳转页面或者跳转到第三方网站的网站能比较有用。大多数人认为，我们的转化跟踪代码只能加在“页面”中，其实不然，我们需要的只是一个触发规则，页面加载只是规则之一。设置方法如下：

>1.创建规则：

>>如果是表单提交，则event=gtm.formSubmit，如果你还需要验证表单提交的有效性，比如提交的电话号码是否符合要求，则可以再新增一个正则表达式条件，如：其中的一个事件标签或事件操作（具体设置方法待续），正则匹配：(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)

>>如果是外部链接，则event=gtm.linkClick，并且element url包含或匹配你所需要跟踪的URL。

*另外，我们设置规则的时候建议再加上一个event=gtm.dom的规则，避免数据加载延迟或获取不到数据。

>2.新建代码，同上。

>3.触发规则，并保存发布。


目前想到的，并且成功部署实施过的就是上述两种场景了，如果还有其他的想法或者特殊跟踪目的，欢迎评论或与我联系。
