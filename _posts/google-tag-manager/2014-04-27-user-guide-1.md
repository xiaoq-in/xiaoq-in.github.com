---
layout: post
title: Google Tag Manager使用指南（一）
permalink: /google-tag-manager/user-guide-1/
category : Google Tag Manager
tags : [Google Tag Manager, 分析工具, GA, UA, 百度统计, CNZZ]
---
{% include JB/setup %}


Google Tag Manager（以下简称GTM），一个免费的代码管理工具，它可以帮你高效地管理网站中的各种代码，包括分析工具的代码、营销推广的代码、受众分析的代码、以及其他的任意javascript代码。

对于大多数公司而言，使用这个工具可能只需要半天不到的时间就行了，从需求分析来看，以此会有以下几方面（按优先级排序）：

1.添加Google Analytics（Universal Analytics）跟踪代码、百度统计跟踪代码、CNZZ等跟踪代码。

2.添加Google AdWords再营销跟踪代码、百度网盟到访定向跟踪代码、其他DSP的再营销跟踪代码。

3.添加Google Adwords转化跟踪代码、百度推广转化跟踪代码、其他搜索引擎转化跟踪代码。

注：如果你用GA或百度统计自带的转化目标和再营销，在1完成后，2和3可能并不需要。

4.自定义搜索引擎：对于国内的公司来说，这是一个不得不做的操作，否则各种搜索引擎归类会比较混乱。

5.电子商务跟踪代码、目前来看，国内的几个免费分析工具都没有这种功能，大多数人用的是GA，少部分人可能使用Piwik等。

6.事件跟踪代码：大多数公司可能并没有使用这种功能、甚至对此毫不知情。如果用过或者想用话，这个会稍微麻烦一些。

7.内容分组：从代码方式的实现机制来看，可以看做是虚拟页面跟踪和自定义维度的一个中间体，不过是它的应用场景更具有针对性罢了。

8.自定义维度、自定义指标等：更少的公司会用到这种功能。代码部署和设置比事件跟踪可能稍微简单一些。

9.跨域跟踪、子域名跟踪等：一般会同时涉及到多配置文件或多账户的使用，大公司可能会用上，其中可能会涉及到上卷和下钻、虚拟页面跟踪等。

10.内容实验：恐怕只有极少数公司会做这方面的工作了。实验是对网站分析成果的一个结论性验证，通过不断地测试与验证，让分析推动改进。

本文先介绍简单的，即其中的1。

对于这种代码，我们基本不需要设置特定的规则，只需要全局应用，即触发规则为整站所有页面。

也不需要设置用到复杂的宏，考虑到后续可以重复使用某个变量，建议将跟踪ID设置为常量字符串的宏，如下图所示：

![UAID](http://blog.xiaoq.in/cdn/hub/uaid.gif)

如果是GA、UA等系统内置的分析工具，则设置方法如下图：

![GTM UA](http://blog.xiaoq.in/cdn/hub/gtm-ua.gif)

如果是百度统计、CNZZ等非系统内置的分析工具，则设置方法如下图：

![GTM 百度统计](http://blog.xiaoq.in/cdn/hub/gtm-baidu-tongji.gif)

![GTM CNZZ](http://blog.xiaoq.in/cdn/hub/gtm-cnzz.gif)

请注意：

1.规则是所有页面。

2.其他均使用默认的。

3.请查看第三方的分析工具是否有使用document.write，有的话记得勾选该选项。

4.完成后需要发布，代码才能生效。

通过上述设置，我们就把各个分析工具的代码进行了一个简单的整合，如果你当前使用了好几个分析工具，并且存在各种代码添加管理的不便，建议先从这个开始。

不需要懂规则、懂宏，只要懂复制和贴，就可以用GTM这个高大上的工具了。

未完待续~

